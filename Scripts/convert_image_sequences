#!/bin/sh

BASE_DIR=$(pwd)
VARIABLES="
    sea_surface_temperature
    mean_sea_level_pressure
    total_cloud_cover
    two_metre_temperature"

OUTPUT_DIR="${1:-output/img}"   # directory containing the images
EXT_OUT="mp4"                   # extension of the file ffmpeg should output
FRAMERATE=30                    # desired output framerate
OVERWRITE=false                 # should ffmpeg blindly overwrite files?

echo "Creating $FRAMERATE FPS $EXT_OUT image sequences in $OUTPUT_DIR"

for variable in $VARIABLES; do
    cd "$OUTPUT_DIR/$variable"
    filename="_$variable.$EXT_OUT" 
    ffmpeg ${OVERWRITE:+-y} -hide_banner -loglevel panic -framerate $FRAMERATE -i %d.png "$filename"

    cd "$BASE_DIR"
done
